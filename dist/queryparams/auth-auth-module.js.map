{"version":3,"sources":["./src/app/auth/header/header.component.ts","./src/app/auth/header/header.component.html","./src/app/auth/auth.routing.ts","./src/app/auth/auth.module.ts","./src/app/auth/login/login.component.ts","./src/app/auth/login/login.component.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAkD;;AAO3C,MAAM,eAAe;IAE1B,gBAAgB,CAAC;IAEjB,QAAQ;IACR,CAAC;;8EALU,eAAe;+FAAf,eAAe;QCP5B,yEACE;QAAA,0EACE;QAAA,oEACF;QAAA,4DAAO;QACT,4DAAM;;6FDGO,eAAe;cAL3B,uDAAS;eAAC;gBACT,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,yBAAyB;gBACtC,SAAS,EAAE,CAAC,wBAAwB,CAAC;aACtC;;;;;;;;;;;;;;AELD;AAAA;AAAA;AAAyD;AAClD,MAAM,UAAU,GAAW;IAChC;QACE,IAAI,EAAE,EAAE;QACR,UAAU,EAAE,OAAO;QACnB,SAAS,EAAE,MAAM;KAClB;IACD;QACE,IAAI,EAAE,OAAO;QACb,SAAS,EAAE,qEAAc;KAC1B;CACF,CAAC;;;;;;;;;;;;;ACZF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AACU;AACV;AACH;AACgB;AACkB;;;AAWvE,MAAM,UAAU;;yFAAV,UAAU;8IAAV,UAAU,kBANZ;YACT,4DAAY,CAAC,QAAQ,CAAC,wDAAU,CAAC;YAC/B,4DAAY;YACZ,2FAAwB;SACzB;mIAEU,UAAU,mBAPN,qEAAc,EAAE,wEAAe,2EAG5C,4DAAY;QACZ,2FAAwB;6FAGf,UAAU;cARtB,sDAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,qEAAc,EAAE,wEAAe,CAAC;gBAC/C,OAAO,EAAE;oBACT,4DAAY,CAAC,QAAQ,CAAC,wDAAU,CAAC;oBAC/B,4DAAY;oBACZ,2FAAwB;iBACzB;aACF;;;;;;;;;;;;;;AChBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+D;AAEb;AAEgB;;;;;;;;;;;ICG9D,yEAOA;IAFE,qTAA2B;IAL7B,4DAOA;;;IAAA,qFAKwB;;IAHtB,wEAAe;;ADJd,MAAM,cAAc;IAMzB,YACS,WAAwB,EACxB,MAAc,EACd,KAAqB,EACpB,IAAgB,EAChB,aAA4B;QAJ7B,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAgB;QACpB,SAAI,GAAJ,IAAI,CAAY;QAChB,kBAAa,GAAb,aAAa,CAAe;QAPtC,cAAS,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAC9C,kBAAa,GAAa,CAAC,cAAc,EAAE,YAAY,EAAE,YAAY,EAAE,YAAY,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,eAAe,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,OAAO,EAAE,YAAY,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,QAAQ,EAAE,OAAO,EAAE,eAAe,EAAE,SAAS,CAAC,CAAC;IAOvT,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC;QAC1E,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YAC1C,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,qDAAqD;QACrD,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;YACjD,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;IACH,CAAC;IACD,eAAe;QACb,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC;IACxC,CAAC;IACD,UAAU;QACR,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,qEAAW,CAAC,OAAO,GAAG,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,SAAS,CAC9E,CAAC,GAAQ,EAAE,EAAE;YACX,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC5D,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAClD,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAClD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC,EACD,GAAG,CAAC,EAAE;YACJ,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACnB,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;gBACtB,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB;QACH,CAAC,CACF;IACH,CAAC;IACD,aAAa;QACX,IAAI,CAAC,IAAI;aACN,IAAI,CAAC,qEAAW,CAAC,OAAO,GAAG,OAAO,EAAE;YACnC,IAAI,EAAE,IAAI,CAAC,UAAU;SACtB,CAAC;aACD,SAAS,CACR,CAAC,GAAQ,EAAE,EAAE;YACX,YAAY,CAAC,OAAO,CAAC,kBAAkB,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAChE,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAClD,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChD,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC7D,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;YAC9C,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YAChC,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CACF,CAAC;IACN,CAAC;IACD,WAAW;QACT,IAAI,MAAM,GAAG;YACX,OAAO,EAAE,IAAI,gEAAW,EAAE;iBACvB,GAAG,CAAC,eAAe,EAAE,UAAU,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3D;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,qEAAW,CAAC,OAAO,GAAG,QAAQ,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAAC,MAAM,CAAC,CAAC,SAAS,CACjF,CAAC,IAAS,EAAE,EAAE;YACZ,MAAM,OAAO,GAAG;gBACd,KAAK,EAAE,IAAI,CAAC,SAAS;gBACrB,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,aAAa;gBAChC,YAAY,EAAE,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC;aACnD;YACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,qEAAW,CAAC,OAAO,GAAG,cAAc,EAAE,OAAO,CAAC,CAAC,SAAS,CACrE,CAAC,IAAS,EAAE,EAAE;gBACZ,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;gBACzD,sBAAsB;gBACtB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,CAAC,EACD,IAAI,CAAC,EAAE;gBACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACtB,CAAC,CACF;QACH,CAAC,EACD,IAAI,CAAC,EAAE;YACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC,CACF;IACH,CAAC;IACD,YAAY;QACV,MAAM,OAAO,GAAG;YACd,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC;YACxC,aAAa,EAAE,QAAQ;YACvB,MAAM,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC;SAC7B;QACD,IAAI,MAAM,GAAG;YACX,OAAO,EAAE,IAAI,gEAAW,EAAE;iBACvB,GAAG,CAAC,eAAe,EAAE,UAAU,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3D;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,qEAAW,CAAC,OAAO,GAAG,kBAAkB,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,SAAS,CACjF,CAAC,GAAQ,EAAE,EAAE;YACX,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC,EACD,GAAG,CAAC,EAAE;YACJ,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CACF;IACH,CAAC;IACD,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;IACvC,CAAC;IACD,UAAU;QACR,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;IAChC,CAAC;;4EAvHU,cAAc;8FAAd,cAAc;QCZ3B,wEAAyB;QACzB,yEACE;QAAA,yEAGE;QAAA,0EAAiC;QAAA,kEAAO;QAAA,4DAAO;QAC/C,0EAA8B;QAAA,wFAA6B;QAAA,4DAAO;QAClE,0GAOA;QAAA,4IAKC;QACH,4DAAM;QACR,4DAAM;;QAZA,0DAAwB;QAAxB,sFAAwB;QAMxB,0DAAuB;QAAvB,qFAAuB;;6FDHhB,cAAc;cAL1B,uDAAS;eAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,WAAW,EAAE,wBAAwB;gBACrC,SAAS,EAAE,CAAC,uBAAuB,CAAC;aACrC","file":"auth-auth-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"header d-flex justify-content-between shadow-lg\">\n  <span class=\"header-logo\">\n    <img class=\"header-image\" src=\"assets/icon.JPG\" alt=\"\" srcset=\"\">\n  </span>\n</div>\n","import { Routes } from '@angular/router';\nimport { LoginComponent } from './login/login.component';\nexport const authRoutes: Routes = [\n  {\n    path: '',\n    redirectTo: 'login',\n    pathMatch: 'full'\n  },\n  {\n    path: 'login',\n    component: LoginComponent,\n  },\n];\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoginComponent } from './login/login.component';\nimport { RouterModule } from '@angular/router';\nimport { authRoutes } from './auth.routing';\nimport { HeaderComponent } from './header/header.component';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\n\n\n@NgModule({\n  declarations: [LoginComponent, HeaderComponent],\n  imports: [\n  RouterModule.forChild(authRoutes),\n    CommonModule,\n    MatProgressSpinnerModule\n  ]\n})\nexport class AuthModule { }\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/service/auth.service';\nimport { environment } from './../../../environments/environment';\nimport { ConfigService } from 'src/app/service/config.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n})\nexport class LoginComponent implements OnInit {\n  config: any;\n  driveToken: string;\n  driveAccessToken: string;\n  userEmail = localStorage.getItem('userEmail');\n  headerColumns: string[] = ['numar lucare', 'depus ocpi', 'benificiar', 'proprietar', 'observatii', 'Uat', 'adresa', 'cf', 'identificator', 'contract servici', 'pret total lucare', 'avans', 'differenta', 'ocpi', 'bcpi', 'anul', 'numar cerere ocpi', 'data inregistere', 'terman', 'tipul', 'stare curenta', 'lucrare'];\n  constructor(\n    public authService: AuthService,\n    public router: Router,\n    public route: ActivatedRoute,\n    private http: HttpClient,\n    private configService: ConfigService,\n  ) { }\n\n  ngOnInit(): void {\n    this.configService.sharedConfig.subscribe(config => this.config = config);\n    this.route.queryParams.subscribe((params) => {\n      this.driveToken = params['code'];\n    });\n\n    // this.driveToken = this.route.snapshot.params.code;\n    if (this.driveToken) {\n      this.configService.setConfig({ isLoader: true });\n      this.getDriveToken();\n    }\n  }\n  drivePermission() {\n    this.configService.setConfig({ isLoader: true });\n    this.authService.askDrivePermission();\n  }\n  getSheetId() {\n    this.http.get(environment.baseUrl + 'fetch/sheetId/' + this.userEmail).subscribe(\n      (res: any) => {\n        localStorage.setItem('refreshToken', res.data.refreshToken);\n        localStorage.setItem('userEmail', res.data.email);\n        localStorage.setItem('sheetId', res.data.sheetId);\n        this.gotoHome();\n      },\n      err => {\n        console.error(err);\n        if (err.status === 404) {\n          this.createSheet();\n        }\n      }\n    )\n  }\n  getDriveToken() {\n    this.http\n      .post(environment.baseUrl + 'token', {\n        code: this.driveToken,\n      })\n      .subscribe(\n        (res: any) => {\n          localStorage.setItem('driveAccessToken', res.data.access_token);\n          localStorage.setItem('userEmail', res.data.email);\n          localStorage.setItem('userName', res.data.name);\n          localStorage.setItem('refreshToken', res.data.refresh_token);\n          this.driveAccessToken = res.data.access_token;\n          this.userEmail = res.data.email;\n          this.getSheetId();\n        },\n        (err) => {\n          console.error(err);\n        }\n      );\n  }\n  createSheet() {\n    var header = {\n      headers: new HttpHeaders()\n        .set('Authorization', `Bearer ${this.driveAccessToken}`)\n    }\n    this.http.post(environment.baseUrl + 'sheets', { \"name\": \"test\" },header).subscribe(\n      (res1: any) => {\n        const payload = {\n          email: this.userEmail,\n          sheetId: res1.data.spreadsheetId,\n          refreshToken: localStorage.getItem('refreshToken')\n        }\n        this.http.post(environment.baseUrl + 'post/sheetId', payload).subscribe(\n          (resS: any) => {\n            localStorage.setItem('sheetId', res1.data.spreadsheetId);\n            //this.createHeader();\n            this.gotoHome();\n          },\n          errS => {\n            console.error(errS);\n          }\n        )\n      },\n      err1 => {\n        console.error(err1);\n      }\n    )\n  }\n  createHeader() {\n    const payload = {\n      sheetId: localStorage.getItem('sheetId'),\n      workSheetName: 'Sheet1',\n      values: [this.headerColumns],\n    }\n    var header = {\n      headers: new HttpHeaders()\n        .set('Authorization', `Bearer ${this.driveAccessToken}`)\n    }\n    this.http.post(environment.baseUrl + 'work/sheets/rows', payload, header).subscribe(\n      (res: any) => {\n        this.gotoHome();\n      },\n      err => {\n        console.error(err);\n      }\n    )\n  }\n  gotoHome() {\n    this.router.navigate(['/dashboard']);\n  }\n  googleAuth(): void {\n    this.configService.setConfig({ isLoader: true });\n    this.authService.GoogleAuth();\n  }\n}\n","<app-header></app-header>\n<div class=\"full-screen-page\">\n  <div\n    class=\"card shadow-lg d-flex flex-column justify-content-center align-items-center p-5 rounded\"\n  >\n    <span class=\"login-text-welcome\">Welcome</span>\n    <span class=\"login-text mb-2\">Login to your Claudiu Account</span>\n    <img\n      class=\"cursor-pointer\"\n      *ngIf=\"!config.isLoader\"\n      src=\"assets/btn_google.png\"\n      alt=\"login-btn\"\n      (click)=\"drivePermission()\"\n    />\n    <mat-progress-spinner\n      *ngIf=\"config.isLoader\"\n      [diameter]=\"32\"\n      [strokeWidth]=\"8\"\n      mode=\"indeterminate\"\n    ></mat-progress-spinner>\n  </div>\n</div>\n"],"sourceRoot":"webpack:///"}