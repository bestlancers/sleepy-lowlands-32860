(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"6uu6":function(t,e,o){"use strict";o.d(e,"a",(function(){return g}));var i=o("Jgta"),r=(o("6nsN"),o("AytR")),s=o("HDdC"),a=o("fXoL"),n=o("UbJi"),c=o("tk/3"),u=o("LWby"),h=o("tyNb");let g=(()=>{class t{constructor(t,e,o,i){this.afAuth=t,this.http=e,this.configService=o,this.router=i,this.renewToken=new s.a(t=>{const e={sheetId:localStorage.getItem("sheetId"),email:localStorage.getItem("userEmail"),refreshToken:localStorage.getItem("refreshToken")};this.http.patch(r.a.baseUrl+"update/token",e).subscribe(e=>{t.next(!0)},e=>{this.logout(),t.error("renew token error")})})}GoogleAuth(){this.AuthLogin(new i.a.auth.GoogleAuthProvider)}AuthLogin(t){this.afAuth.signInWithPopup(t).then(t=>{localStorage.setItem("userEmail",t.user.email),localStorage.setItem("userName",t.user.displayName),localStorage.setItem("uid",t.user.uid),this.askDrivePermission()}).catch(t=>{console.log(t)})}askDrivePermission(){this.http.get(r.a.baseUrl+"permission").subscribe(t=>{window.location=t.data},t=>{console.error(t),this.configService.setConfig({isLoader:!1})})}logout(){this.configService.setConfig({isLoader:!1}),localStorage.clear(),this.router.navigate(["/"])}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(n.a),a.Wb(c.a),a.Wb(u.a),a.Wb(h.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},LWby:function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var i=o("2Vo4"),r=o("fXoL");let s=(()=>{class t{constructor(){this.config=new i.a({}),this.sharedConfig=this.config.asObservable()}setConfig(t){this.configData=Object.assign(Object.assign({},this.configData),t),this.config.next(this.configData)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);